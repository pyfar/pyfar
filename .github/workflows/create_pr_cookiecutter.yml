name: create pr from cookiecutter

on:
  pull_request:
    types:
      - opened
      - labeled
      - unlabeled
      - synchronize

jobs:
  create-pr-from-cookiecutter:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: create pr from cookiecutter
        run: |

          PYFAR_VERSION=$(python -c "import pyfar; print(pyfar.__version__)")

          cookiecutter /Users/anne/git/cookiecutter/cookiecutter-pypackage --overwrite-if-exists --directory . --output-dir ./.. --no-input  project_name=pyfar default_python_version=3.13 install_libsndfile1='y' project_short_description="Python package for acoustics research" project_long_description="The python package for acoustics research (pyfar) offers classes to store audio data, filters, coordinates, and orientations. It also contains functions for reading and writing audio data, as well as functions for processing, generating, and plotting audio signals." keywords='"pyfar","acoustics","Fourier transforms","audio signal processing","filterbanks","parametric filters","audio signal visualization","read and write audio signals"' version=$PYFAR_VERSION new_project='n'

          # restore files which are modified during development
          git restore HISTORY.rst
          git restore LICENSE
          git restore docs/api_reference.rst
          git restore pyfar/__init__.py

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v7
        with:
            token: ${{ secrets.create_pr_secret }}
            commit-message: Update dependencies
            title: Update dependencies
            base: main
            body: |
              - Dependency updates
  
              Auto-generated by [create-pull-request][1]
  
              [1]: https://github.com/peter-evans/create-pull-request
            branch: update-dependencies
